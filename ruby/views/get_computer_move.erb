get_computer_move(board)
{
  <% (0..8).each do |move| %>
  if (get_computer_move_<%= move %>(board) == 1) {
    return <%= move %>;
  }
  <% end %>
  asm { @"Couldn't find a move" }
  asm { halt }
}

<% (0..8).each do |move| %>
get_computer_move_<%= move %>(board)
{
  result = 0;

  if (<%= combined_results[move].uniq.sort.map { |board| "(board == #{board})" }.join(" || ") %>) {
    result = 1;
  }

  return result;
}

<% end %>
